<div class="dashboard-container">
  <!-- Hero Header -->
  <div class="dashboard-header text-center py-5 bg-light rounded-3 mb-4" *ngIf="user">
    <h1 class="display-4 fw-bold text-primary">
      <i class="bi bi-speedometer2 me-2"></i>Your Recovery Dashboard
    </h1>
    <p class="lead text-muted">
      Welcome back, <span class="text-dark fw-bold">{{ user.name }}</span>!
      Track your progress and manage your recovery journey.
    </p>
  </div>

  <!-- Main Content -->
  <div class="dashboard-content" *ngIf="user">
    <div class="row g-4">
      <!-- Profile Card -->
      <div class="col-lg-4">
        <div class="card profile-card shadow-sm h-100">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
              <i class="bi bi-person-circle me-2"></i>Profile Summary
            </h5>
          </div>
          <div class="card-body text-center">
            <div class="avatar-placeholder mb-3">
              <i class="bi bi-person-fill text-muted" style="font-size: 4rem;"></i>
            </div>
            <h4 class="mb-2">{{ user.name }} {{ user.familyName }}</h4>
            <p class="text-muted mb-4">Member since {{ user.createdAt | date:'mediumDate' }}</p>

            <!-- Addictions Section -->
            <div class="addictions-section">
              <h6 class="section-title">
                <i class="bi bi-heart-pulse me-2"></i>Your Addictions
              </h6>

              <div *ngIf="user!.addictions.length > 0; else noAddictions">
                <div class="addiction-badges">
                  <span *ngFor="let addiction of user!.addictions"
                        class="badge rounded-pill bg-light text-dark me-2 mb-2">
                    {{ addiction.name }}
                    <span class="ms-1" [ngClass]="{
                      'text-danger': addiction.severityLevel === 'HIGH',
                      'text-warning': addiction.severityLevel === 'MEDIUM',
                      'text-success': addiction.severityLevel === 'LOW'
                    }">
                      ⚠️
                    </span>
                  </span>
                </div>
              </div>
              <ng-template #noAddictions>
                <div class="alert alert-light">
                  <i class="bi bi-info-circle me-2"></i>
                  You haven't added any addictions yet
                </div>
              </ng-template>
            </div>

            <!-- Emergency Button -->
            <div class="mt-4 pt-3 border-top">
              <button class="btn btn-danger w-100" (click)="emergencyCall()">
                <i class="bi bi-telephone-outbound-fill me-2"></i>
                Emergency Support
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Details Card -->
      <div class="col-lg-8">
        <div class="card details-card shadow-sm h-100">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
              <i class="bi bi-card-checklist me-2"></i>Account Details
            </h5>
          </div>
          <div class="card-body">
            <div class="detail-item row py-2 align-items-center">
              <div class="col-sm-3">
                <span class="detail-label">
                  <i class="bi bi-person-fill me-2"></i>First Name
                </span>
              </div>
              <div class="col-sm-9">
                <span class="detail-value">{{ user!.name }}</span>
              </div>
            </div>
            <hr class="my-2">

            <div class="detail-item row py-2 align-items-center">
              <div class="col-sm-3">
                <span class="detail-label">
                  <i class="bi bi-people-fill me-2"></i>Last Name
                </span>
              </div>
              <div class="col-sm-9">
                <span class="detail-value">{{ user!.familyName }}</span>
              </div>
            </div>
            <hr class="my-2">

            <div class="detail-item row py-2 align-items-center">
              <div class="col-sm-3">
                <span class="detail-label">
                  <i class="bi bi-envelope-fill me-2"></i>Email
                </span>
              </div>
              <div class="col-sm-9">
                <span class="detail-value">{{ user!.email }}</span>
              </div>
            </div>
            <hr class="my-2">

            <div class="detail-item row py-2 align-items-center">
              <div class="col-sm-3">
                <span class="detail-label">
                  <i class="bi bi-person-badge-fill me-2"></i>Username
                </span>
              </div>
              <div class="col-sm-9">
                <span class="detail-value">{{ user!.username }}</span>
              </div>
            </div>
            <hr class="my-2">

            <div class="detail-item row py-2 align-items-center">
              <div class="col-sm-3">
                <span class="detail-label">
                  <i class="bi bi-calendar-check-fill me-2"></i>Member Since
                </span>
              </div>
              <div class="col-sm-9">
                <span class="detail-value">{{ user!.createdAt | date:'fullDate' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons mt-4 text-center">
      <button (click)="logout()" class="btn btn-outline-danger me-3">
        <i class="bi bi-box-arrow-right me-2"></i>Log Out
      </button>
      <button (click)="deleteAccount()" class="btn btn-outline-dark">
        <i class="bi bi-trash-fill me-2"></i>Delete Account
      </button>
    </div>
  </div>
</div>
